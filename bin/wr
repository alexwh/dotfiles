#!/bin/bash
# wr = wine run

# defaults
arch="win32"
prefix="/home/alex/.wine"
wine="true"

osu() {
	exe="osu!.exe"
	path="/home/alex/.wine/drive_c/Program Files/osu!/"
}

steam() {
	prefix="/home/alex/.local/share/wineprefixes/steam"
	exe="Steam.exe"
	path="/home/alex/.local/share/wineprefixes/steam/drive_c/Program Files/Steam/"
}

oblivion() {
	prefix="/home/alex/.local/share/wineprefixes/oblivion"
	exe="Oblivion.exe"
	path="/home/alex/.local/share/wineprefixes/oblivion/drive_c/The Elder Scrolls IV Oblivion GOTY Deluxe/"
}

muvluv() {
	exe="muvluv.exe"
	path="/home/alex/.wine/drive_c/Program Files/Muv-Luv Alternative/"
}

saya() {
	exe="saya.exe"
	path="/home/alex/.wine/drive_c/Program Files/Saya no Uta/"
}

busters() {
	wine="false"
	exe="rlvm"
	path="/home/alex/.wine/drive_c/Program Files/Little Busters!"
	args="."
}

clannad() {
	wine="false"
	exe="rlvm"
	path="/home/alex/.wine/drive_c/Program Files/Clannad"
	args="."
}

vbox() {
	wine="false"
	exe="VirtualBox"
	args="--startvm w7"
}

if [[ -z $@ ]];then
	$(echo -e "osu\nvbox\nsteam\noblivion\nmuvluv\nsaya\nbusters\nclannad" | dmenu -p game)
else
	for i;do
		$i
	done
fi

[[ -n "$path" ]] && cd "$path" # ye
if [[ $wine = "true" ]];then
	WINEDEBUG=-all WINEARCH="$arch" WINEPREFIX="$prefix" exec ssr-glinject wine "$exe"
else
	exec ssr-glinject $exe $args
fi
